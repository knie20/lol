<!doctype html>
<html ng-app="application-info" ng-controller="applicationInfoCtrl">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script> 
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <div class="page-header">{{ currentUser }}</div>
    <h1>{{ applicant.FirstName}}</h1> <h1>{{ applicant.LastName }}</h1>
    <h3>{{ applicant.Email }}</h3>
    <div id="pdf-wrapper">
        <object data="{{ applicant.ResumePath }}" type="application/pdf" width="100%" height="100%">
          <iframe src="{{ applicant.ResumePath }}" width="100%" height="100%" style="border: none;">
          This browser does not support PDFs. Please download the PDF to view it: <a href="{{ applicant.ResumePath }}">Download PDF</a>
          </iframe>
          </object>
    </div>
    <script> 
    angular.module('application-info', [])
    .controller('applicationInfoCtrl', ['$scope', '$http', '$window', '$location', function($scope, $http, $window, $location){
      var applicantId = new URL($window.location.href).searchParams.get("id");
      
      var applicantReq = {
          method: 'GET',
          url: '/api/application/' + applicantId,
          headers: { Authorization: 'JWT ' + localStorage.getItem('JWT')},
          data: { }
        }
      
      $http(applicantReq).then(res => {
        $scope.applicant = res.data;
      });
    }]);
    </script>
  </body>
</html>